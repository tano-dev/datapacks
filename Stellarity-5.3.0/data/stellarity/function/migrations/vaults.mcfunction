# Vault Migrations

# execute at @a run fill ~5 ~5 ~5 ~-5 ~-5 ~-5 vault{config:{loot_table:"stellarity:end_city/vault/elytra",key_item:{components: {"minecraft:item_name": {translate: "stellarity.item.materials.keys.winged"}, "minecraft:lore": ["", {color: "#EEEEEE", italic: 0b, translate: "stellarity.item.materials.keys.winged.description"}, "", {color: "#CC26FF", italic: 1b, translate: "Stellarity"}], "minecraft:item_model": "stellarity:winged_key", "minecraft:rarity": "rare", "minecraft:custom_data": {"stellarity:item": "winged_key"}}, id: "minecraft:ominous_trial_key"}}} replace vault{config:{key_item:{components:{"minecraft:custom_data":{"stellarity:item": "winged_key", }}}}}

execute at @a[predicate=stellarity:item/holding/winged_key] run fill ~4 ~2 ~4 ~-4 ~-2 ~-4 vault[ominous=true]{config:{loot_table:"stellarity:end_city/vault/elytra",override_loot_table_to_display:"stellarity:end_city/vault/elytra",key_item:{components: {"minecraft:item_name": {translate: "stellarity.item.materials.keys.winged"}, "minecraft:lore": ["", {color: "#EEEEEE", italic: 0b, translate: "stellarity.item.materials.keys.winged.description"}, "", {color: "#CC26FF", italic: 1b, translate: "Stellarity"}], "minecraft:item_model": "stellarity:winged_key", "minecraft:rarity": "rare", "minecraft:custom_data": {"stellarity:item": "winged_key"}}, id: "minecraft:ominous_trial_key"}}} replace vault{config:{key_item:{components:{"minecraft:item_name": '{,"translate":"stellarity.item.materials.keys.winged"}',"minecraft:custom_data":{"stellarity:item": "winged_key"}}}}}

execute at @a[predicate=stellarity:item/holding/purpur_key] run fill ~4 ~2 ~4 ~-4 ~-2 ~-4 vault[ominous=false,vault_state=inactive]{config:{loot_table:"stellarity:end_city/vault/normal",override_loot_table_to_display:"stellarity:end_city/vault/normal",key_item:{components: {"minecraft:item_name": {translate: "stellarity.item.materials.keys.purpur"}, "minecraft:lore": ["", {color: "#EEEEEE", italic: 0b, translate: "stellarity.item.materials.keys.purpur.description"}, "", {color: "#CC26FF", italic: 1b, translate: "Stellarity"}], "minecraft:item_model": "stellarity:purpur_key", "minecraft:rarity": "uncommon", "minecraft:custom_data": {"stellarity:item": "purpur_key"}}, count: 1, id: "minecraft:trial_key"}}} replace vault{config:{key_item:{components:{"minecraft:item_name": '{,"translate":"stellarity.item.materials.keys.purpur"}',"minecraft:custom_data":{"stellarity:item": "purpur_key"}}}}}

execute at @a[predicate=stellarity:item/holding/gilded_purpur_key] run fill ~4 ~2 ~4 ~-4 ~-2 ~-4 vault[ominous=true,vault_state=inactive]{config:{loot_table:"stellarity:end_city/vault/ominous",override_loot_table_to_display:"stellarity:end_city/vault/ominous",key_item: {components: {"minecraft:item_name": {translate: "stellarity.item.materials.keys.gilded_purpur"}, "minecraft:lore": ["", {color: "#EEEEEE", italic: 0b, translate: "stellarity.item.materials.keys.gilded_purpur.description"}, "", {color: "#CC26FF", italic: 1b, translate: "Stellarity"}], "minecraft:item_model": "stellarity:gilded_purpur_key", "minecraft:rarity": "rare", "minecraft:custom_data": {"stellarity:item": "gilded_purpur_key"}}, count: 1, id: "minecraft:ominous_trial_key"}}} replace vault{config:{key_item:{components:{"minecraft:item_name": '{,"translate":"stellarity.item.materials.keys.gilded_purpur"}',"minecraft:custom_data":{"stellarity:item": "gilded_purpur_key"}}}}}

execute at @a[predicate=stellarity:item/holding/winged_key] run fill ~4 ~2 ~4 ~-4 ~-2 ~-4 vault[ominous=true]{config:{loot_table:"stellarity:end_city/vault/elytra",override_loot_table_to_display:"stellarity:end_city/vault/elytra",key_item:{components: {"minecraft:item_name": {translate: "stellarity.item.materials.keys.winged"}, "minecraft:lore": ["", {color: "#EEEEEE", italic: 0b, translate: "stellarity.item.materials.keys.winged.description"}, "", {color: "#CC26FF", italic: 1b, translate: "Stellarity"}], "minecraft:item_model": "stellarity:winged_key", "minecraft:rarity": "rare", "minecraft:custom_data": {"stellarity:item": "winged_key"}}, id: "minecraft:ominous_trial_key"}}} replace vault{config:{key_item:{components:{"minecraft:item_name": '{"fallback":"Winged Key","translate":"stellarity.item.materials.keys.winged"}',"minecraft:custom_data":{"stellarity:item": "winged_key"}}}}}

execute at @a[predicate=stellarity:item/holding/purpur_key] run fill ~4 ~2 ~4 ~-4 ~-2 ~-4 vault[ominous=false,vault_state=inactive]{config:{loot_table:"stellarity:end_city/vault/normal",override_loot_table_to_display:"stellarity:end_city/vault/normal",key_item:{components: {"minecraft:item_name": {translate: "stellarity.item.materials.keys.purpur"}, "minecraft:lore": ["", {color: "#EEEEEE", italic: 0b, translate: "stellarity.item.materials.keys.purpur.description"}, "", {color: "#CC26FF", italic: 1b, translate: "Stellarity"}], "minecraft:item_model": "stellarity:purpur_key", "minecraft:rarity": "uncommon", "minecraft:custom_data": {"stellarity:item": "purpur_key"}}, count: 1, id: "minecraft:trial_key"}}} replace vault{config:{key_item:{components:{"minecraft:item_name": '{"fallback":"Purpur Key","translate":"stellarity.item.materials.keys.purpur"}',"minecraft:custom_data":{"stellarity:item": "purpur_key"}}}}}

execute at @a[predicate=stellarity:item/holding/gilded_purpur_key] run fill ~4 ~2 ~4 ~-4 ~-2 ~-4 vault[ominous=true,vault_state=inactive]{config:{loot_table:"stellarity:end_city/vault/ominous",override_loot_table_to_display:"stellarity:end_city/vault/ominous",key_item: {components: {"minecraft:item_name": {translate: "stellarity.item.materials.keys.gilded_purpur"}, "minecraft:lore": ["", {color: "#EEEEEE", italic: 0b, translate: "stellarity.item.materials.keys.gilded_purpur.description"}, "", {color: "#CC26FF", italic: 1b, translate: "Stellarity"}], "minecraft:item_model": "stellarity:gilded_purpur_key", "minecraft:rarity": "rare", "minecraft:custom_data": {"stellarity:item": "gilded_purpur_key"}}, count: 1, id: "minecraft:ominous_trial_key"}}} replace vault{config:{key_item:{components:{"minecraft:item_name": '{"fallback":"Gilded Purpur Key","translate":"stellarity.item.materials.keys.gilded_purpur"}',"minecraft:custom_data":{"stellarity:item": "gilded_purpur_key"}}}}}
